<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .btn-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 2rem;
            height: 2rem;
            background-color: #ffffff;
            border-radius: 99px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            line-height: 1;
            cursor: pointer;
            transition: background-color 0.3s ease;
            z-index: 10;
        }
        .btn-close:hover {
            background-color: #f3f4f6;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmpowerHer TransCare Nexus | Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="components/sidebar.js"></script>
    <script src="components/navbar.js"></script>
    <script src="components/stats-card.js"></script>
    <script src="components/quick-access.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',    // Professional blue
                        secondary: '#0EA5E9',  // Lighter blue for accents
                        accent: '#6366F1',     // Indigo for highlights
                        dark: '#1E293B',       // Slate dark for text
                        light: '#F8FAFC',      // Clean background
                        success: '#059669',    // Green for success states
                        warning: '#EAB308',    // Yellow for warnings
                        danger: '#DC2626'      // Red for danger/error states
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans">
    <div class="flex h-screen overflow-hidden bg-light">
        <!-- Sidebar -->
        <aside class="hidden md:flex flex-col w-64 bg-white border-r border-gray-200 shadow-soft transition-all duration-300">
            <div class="flex items-center justify-center h-20 border-b border-gray-200 bg-gradient-to-r from-primary/5 to-secondary/5">
                <div class="flex flex-col items-center">
                    <h1 class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">EmpowerHer</h1>
                    <span class="text-sm text-gray-600 font-medium">TransCare Nexus</span>
                </div>
            </div>
            
            <nav class="flex-1 overflow-y-auto px-3 py-4">
                <div class="mb-4 px-4">
                    <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Main Menu</h2>
                </div>
                <ul class="space-y-0.5">
                    <li>
                        <a href="dash.html" class="flex items-center px-4 py-3 text-dark hover:text-primary bg-primary/5 rounded-lg group relative overflow-hidden">
                            <span class="absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                            <i data-feather="home" class="w-5 h-5 mr-3 text-primary"></i>
                            <span data-i18n="nav.home" class="font-medium">Home</span>
                            <span class="absolute right-3 transform transition-transform duration-300 group-hover:translate-x-1">
                                <i data-feather="chevron-right" class="w-4 h-4 text-primary/70"></i>
                            </span>
                        </a>
                    </li>
                    
                    <div class="mt-6 mb-4 px-4">
                        <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Services</h2>
                    </div>
                    
                    <li>
                        <a href="schemes.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary/5 rounded-lg group relative overflow-hidden">
                            <span class="absolute inset-0 bg-gradient-to-r from-primary/0 to-primary/0 group-hover:from-primary/5 group-hover:to-primary/0 transition-all duration-300"></span>
                            <i data-feather="gift" class="w-5 h-5 mr-3 text-primary/80 group-hover:text-primary transition-colors"></i>
                            <span data-i18n="nav.schemes" class="group-hover:text-gray-900 transition-colors">Schemes</span>
                        </a>
                    </li>
                    <li>
                        <a href="../ngo1/frontend/ngo.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-secondary/5 rounded-lg group relative overflow-hidden">
                            <span class="absolute inset-0 bg-gradient-to-r from-secondary/0 to-secondary/0 group-hover:from-secondary/5 group-hover:to-secondary/0 transition-all duration-300"></span>
                            <i data-feather="users" class="w-5 h-5 mr-3 text-secondary/80 group-hover:text-secondary transition-colors"></i>
                            <span data-i18n="nav.ngos" class="group-hover:text-gray-900 transition-colors">NGOs</span>
                        </a>
                    </li>
                    <li>
                        <a href="sos.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-red-50 rounded-lg group relative overflow-hidden">
                            <span class="absolute left-0 top-0 h-full w-1 bg-red-500/50"></span>
                            <i data-feather="alert-circle" class="w-5 h-5 mr-3 text-red-500"></i>
                            <span data-i18n="nav.sos" class="group-hover:text-red-700 transition-colors">SOS</span>
                            <span class="ml-auto bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full">24/7</span>
                        </a>
                    </li>
                    
                    <div class="mt-6 mb-4 px-4">
                        <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Resources</h2>
                    </div>
                    
                    <li>
                        <a href="../legalact/legal.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-accent/5 rounded-lg group relative overflow-hidden">
                            <i data-feather="book" class="w-5 h-5 mr-3 text-accent/80 group-hover:text-accent transition-colors"></i>
                            <span data-i18n="nav.legal" class="group-hover:text-gray-900 transition-colors">Legal Acts</span>
                        </a>
                    </li>
                    <li>
                        <a href="../empowerment/education.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary/5 rounded-lg group relative overflow-hidden">
                            <i data-feather="edit-3" class="w-5 h-5 mr-3 text-primary/80 group-hover:text-primary transition-colors"></i>
                            <span data-i18n="nav.education" class="group-hover:text-gray-900 transition-colors">Education</span>
                        </a>
                    </li>
                    
                    <div class="mt-6 mb-4 px-4">
                        <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Healthcare</h2>
                    </div>
                    
                    <li>
                        <a href="women-health.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-secondary/5 rounded-lg group relative overflow-hidden">
                            <i data-feather="heart" class="w-5 h-5 mr-3 text-secondary/80 group-hover:text-secondary transition-colors"></i>
                            <span data-i18n="nav.women_health" class="group-hover:text-gray-900 transition-colors">Women Health Care</span>
                        </a>
                    </li>
                    <li>
                        <a href="trans-health.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary/5 rounded-lg group relative overflow-hidden">
                            <i data-feather="activity" class="w-5 h-5 mr-3 text-primary/80 group-hover:text-primary transition-colors"></i>
                            <span data-i18n="nav.trans_health" class="group-hover:text-gray-900 transition-colors">Trans Health Care</span>
                        </a>
                    </li>
                    <li>
                    </li>
                </ul>
            </nav>
        </aside>
         
        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Top Navigation -->
            <header class="bg-white border-b border-gray-200 shadow-sm">
                <div class="flex items-center justify-between h-16 px-6 bg-gradient-to-r from-white to-primary/5">
                    <div class="flex items-center">
                        <button id="mobile-menu" class="md:hidden text-dark hover:text-primary transition-colors">
                            <i data-feather="menu" class="w-6 h-6"></i>
                        </button>
                        <div class="ml-4 flex items-center">
                            <div class="relative flex items-center">
                                <input id="searchInput" data-i18n-placeholder="header.searchPlaceholder" type="text" placeholder="Search for resources..." class="w-64 pl-4 pr-12 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                <button id="micButton" class="absolute right-3 p-1 text-gray-500 hover:text-primary focus:outline-none group" aria-label="Search by voice">
                                    <i data-feather="mic" class="w-4 h-4"></i>
                                    <span id="micStatus" class="absolute right-0 top-8 text-xs bg-gray-800 text-white px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity">Search by voice</span>
                                </button>
                                <div id="searchResults" class="absolute left-0 right-0 mt-2 bg-white rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto hidden">
                                    <!-- Search results will be populated here -->
                                </div>
                            </div>
                            <select id="langSelect" class="ml-3 px-3 py-2 rounded-lg bg-gray-100 text-sm" aria-label="Language selector">
                                <option value="en">English</option>
                                <option value="hi">हिन्दी</option>
                                <option value="bn">বাংলা</option>
                                <option value="te">తెలుగు</option>
                                <option value="mr">मराठी</option>
                                <option value="ta">தமிழ்</option>
                                <option value="ur">اردو</option>
                                <option value="gu">ગુજરાતી</option>
                                <option value="kn">ಕನ್ನಡ</option>
                                <option value="ml">മലയാളം</option>
                                <option value="or">ଓଡ଼ିଆ</option>
                                <option value="pa">ਪੰਜਾਬੀ</option>
                                <option value="as">অসমীয়া</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="relative text-gray-500 hover:text-gray-700">
                            <i data-feather="bell" class="w-6 h-6"></i>
                            <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                        </button>
                        <div class="flex items-center">
                            <img src="https://ui-avatars.com/api/?background=FF6B8B&color=fff" alt="User avatar" class="w-8 h-8 rounded-full">
                            <span class="ml-2 text-sm font-medium text-gray-700">Welcome</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content Area -->
            <main class="flex-1 overflow-y-auto bg-gray-50 p-6">
                <div class="max-w-7xl mx-auto">
                    <!-- Hero Success Stories Slider (top) -->
                    <section class="mb-8">
                        <div id="heroSlider" class="relative rounded-xl overflow-hidden">
                            <div id="heroSlides" class="flex transition-transform duration-700" style="transform: translateX(0%);">                                                                                      

                                <!-- Gauri Sawant Slide -->
                                <div id="gauriSlide" class="w-full flex-shrink-0 relative bg-cover bg-center h-64 md:h-96" style="background-image: url('Gauri Sawant.jpg');" data-story="gauri-sawant">
                                    <div class="absolute inset-0 bg-black/40"></div>
                                    <div class="absolute bottom-6 left-6 text-white max-w-xl">
                                        <span class="inline-block px-3 py-1 bg-primary/80 rounded-full text-xs">Inspiring</span>
                                        <h2 class="text-2xl md:text-4xl font-bold mt-3">Gauri Sawant – Transgender Mother & Activist</h2>
                                        <p class="mt-2 text-sm md:text-base">Journey from rejection to recognition: Fighting for transgender rights and redefining motherhood.</p>
                                        <button onclick="showStory('gauri-sawant')" class="inline-block mt-4 px-4 py-2 bg-white text-dark rounded-lg">Read Story</button>
                                    </div>
                                </div>

                                <!-- Cornelia Sorabji Slide -->
                                <div id="corneliaSlide" class="w-full flex-shrink-0 relative bg-cover bg-center h-64 md:h-96" style="background-image: url('https://www.some.ox.ac.uk/wp-content/uploads/2021/06/Eminent-Somervillians_Cornelia-Sorabji-1.jpg');" data-story="cornelia-sorabji">
                                    <div class="absolute inset-0 bg-black/40"></div>
                                    <div class="absolute bottom-6 left-6 text-white max-w-xl">
                                        <span class="inline-block px-3 py-1 bg-secondary/80 rounded-full text-xs">Pioneer</span>
                                        <h2 class="text-2xl md:text-4xl font-bold mt-3">Cornelia Sorabji – India's First Woman Lawyer</h2>
                                        <p class="mt-2 text-sm md:text-base">Breaking barriers in law: From Oxford to championing women's legal rights in India (1866-1954).</p>
                                        <button onclick="showStory('cornelia-sorabji')" class="inline-block mt-4 px-4 py-2 bg-white text-dark rounded-lg">Read Story</button>
                                    </div>
                                </div>

                                <!-- Karnam Malleswari Slide -->
                                <div id="karnamSlide" class="w-full flex-shrink-0 relative bg-cover bg-center h-64 md:h-96" style="background-image: url('https://sc0.blr1.digitaloceanspaces.com/large/851139-68807-cyzzldcwrf-1505802941.jpg');" data-story="karnam-malleswari">
                                    <div class="absolute inset-0 bg-black/40"></div>
                                    <div class="absolute bottom-6 left-6 text-white max-w-xl">
                                            <span class="inline-block px-3 py-1 bg-accent/80 rounded-full text-xs">Sports</span>
                                            <h2 class="text-2xl md:text-4xl font-bold mt-3">Karnam Malleswari – First Female Olympic Medalist</h2>
                                            <p class="mt-2 text-sm md:text-base">Breaking barriers in sports: From village to Olympic glory (Born 1975).</p>
                                            <button onclick="showStory('karnam-malleswari')" class="inline-block mt-4 px-4 py-2 bg-white text-dark rounded-lg">Read Story</button>
                                    </div>
                                </div>

                                    <!-- Laxmi Narayan Tripathi Slide -->
                                    <div id="laxmiSlide" class="w-full flex-shrink-0 relative bg-cover bg-center h-64 md:h-96" style="background-image: url('https://media.assettype.com/outlookindia/2024-05/07cdb08b-c9cd-4df5-9548-6d066b12ee33/laxmi_naina_3_20240528.jpg?w=801&auto=format%2Ccompress&fit=max&format=webp&dpr=1.0');" data-story="laxmi-tripathi">
                                        <div class="absolute inset-0 bg-black/40"></div>
                                        <div class="absolute bottom-6 left-6 text-white max-w-xl">
                                            <span class="inline-block px-3 py-1 bg-primary/80 rounded-full text-xs">Activist</span>
                                            <h2 class="text-2xl md:text-4xl font-bold mt-3">Laxmi Narayan Tripathi – Breaking Gender Barriers</h2>
                                            <p class="mt-2 text-sm md:text-base">From dancer to international activist: Championing transgender rights and dignity (Born 1978).</p>
                                            <button onclick="showStory('laxmi-tripathi')" class="inline-block mt-4 px-4 py-2 bg-white text-dark rounded-lg">Read Story</button>
                                        </div>
                                    </div>
                            </div>

                            <!-- Controls -->
                            <button id="heroPrev" aria-label="Previous" class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/90 p-2 rounded-full shadow hover:bg-white">
                                <i data-feather="chevron-left" class="w-5 h-5"></i>
                            </button>
                            <button id="heroNext" aria-label="Next" class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/90 p-2 rounded-full shadow hover:bg-white">
                                <i data-feather="chevron-right" class="w-5 h-5"></i>
                            </button>

                            <!-- Dots -->
                            <div id="heroDots" class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2"></div>
                        </div>
                    </section>

                   
                        <!-- Video Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Video Card 1 - YouTube -->
                            <div class="bg-white rounded-xl shadow-sm overflow-hidden group cursor-pointer" data-video-type="youtube" data-video-id="_rLUtGUMaAY">
                                <div class="aspect-video bg-cover bg-center relative" style="background-image: url('https://i.ytimg.com/vi/MgqG84umiT4/maxresdefault.jpg');">
                                    <div class="absolute inset-0 bg-black/40 opacity-100 group-hover:opacity-75 transition-opacity flex items-center justify-center">
                                        <button onclick="playVideo('youtube', '_rLUtGUMaAY')" class="p-4 bg-red-600 rounded-full text-white shadow-lg transform scale-90 group-hover:scale-100 transition-transform">
                                            <i data-feather="play" class="w-6 h-6"></i>
                                        </button>
                                    </div>
                                    <span class="absolute top-2 right-2 px-2 py-1 bg-red-600/90 text-white text-xs rounded-full">20:07</span>
                                </div>
                                <div class="p-4">
                                    <span class="inline-block px-2 py-1 text-xs bg-red-100 text-red-600 rounded-full">YouTube</span>
                                    <h3 class="mt-2 font-semibold">Transgender Activist Gauri Sawant Shares Her Story From Ganesh To Gauri| Jayanti Waghdhare | PODCAST</h3>
                                    <p class="text-sm text-gray-600 mt-1"> By Jayanti Waghdhare </p>
                                </div>
                            </div>

                            <!-- Video Card 2 - Instagram -->
                            <div class="bg-white rounded-xl shadow-sm overflow-hidden group cursor-pointer" data-video-type="youtube" data-video-id="vjTq9wY44eg">
                                <div class="aspect-video bg-cover bg-center relative" style="background-image: url('https://i.ytimg.com/vi/vjTq9wY44eg/maxresdefault.jpg');">
                                    <div class="absolute inset-0 bg-black/40 opacity-100 group-hover:opacity-75 transition-opacity flex items-center justify-center">
                                        <button onclick="playVideo('youtube', 'vjTq9wY44eg')" class="p-4 bg-gradient-to-tr from-purple-600 to-pink-500 rounded-full text-white shadow-lg transform scale-90 group-hover:scale-100 transition-transform">
                                            <i data-feather="play" class="w-6 h-6"></i>
                                        </button>
                                    </div>
                                    <span class="absolute top-2 right-2 px-2 py-1 bg-black/90 text-white text-xs rounded-full">17:53</span>
                                </div>
                                <div class="p-4">
                                    <span class="inline-block px-2 py-1 text-xs bg-gradient-to-r from-purple-100 to-pink-100 text-pink-600 rounded-full">youtube</span>
                                    <h3 class="mt-2 font-semibold">The Transgenders' Battle for Inclusion | Shreegauri Sawant | TEDxYouth@NavrachanaSchoolSama</h3>
                                    <p class="text-sm text-gray-600 mt-1"> By TEDx Talks</p>
                                </div>
                            </div>

                            <!-- Video Card 3 - Local MP4 -->
                            <div class="bg-white rounded-xl shadow-sm overflow-hidden group cursor-pointer" data-video-type="youtube" data-video-src="dqs_dTG5aUU">
                                <div class="aspect-video bg-cover bg-center relative" style="background-image: url('https://i.ytimg.com/vi/dqs_dTG5aUU/maxresdefault.jpg');">
                                    <div class="absolute inset-0 bg-black/40 opacity-100 group-hover:opacity-75 transition-opacity flex items-center justify-center">
                                        <button onclick="playVideo('youtube', 'dqs_dTG5aUU')" class="p-4 bg-primary rounded-full text-white shadow-lg transform scale-90 group-hover:scale-100 transition-transform">
                                            <i data-feather="play" class="w-6 h-6"></i>
                                        </button>
                                    </div>
                                    <span class="absolute top-2 right-2 px-2 py-1 bg-black/90 text-white text-xs rounded-full">23:57</span>
                                </div>
                                <div class="p-4">
                                    <span class="inline-block px-2 py-1 text-xs bg-primary/10 text-primary rounded-full">Community</span>
                                    <h3 class="mt-2 font-semibold">Woman of Iron & India's Pride | Dr Padma Shri Karnam Malleswari On The Gaurav Arya Show</h3>
                                    <p class="text-sm text-gray-600 mt-1">By Republic World</p>
                                </div>
                            </div>

                            <!-- Video Card 4 - YouTube -->
                            <div class="bg-white rounded-xl shadow-sm overflow-hidden group cursor-pointer" data-video-type="youtube" data-video-id="vuMxIdUX108">
                                <div class="aspect-video bg-cover bg-center relative" style="background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSrOcTJ7fLOqVmqol1kPL--vEeVMxhgZbYUJA&s');">
                                    <div class="absolute inset-0 bg-black/40 opacity-100 group-hover:opacity-75 transition-opacity flex items-center justify-center">
                                        <button onclick="playVideo('youtube', 'vuMxIdUX108')" class="p-4 bg-red-600 rounded-full text-white shadow-lg transform scale-90 group-hover:scale-100 transition-transform">
                                            <i data-feather="play" class="w-6 h-6"></i>
                                        </button>
                                    </div>
                                    <span class="absolute top-2 right-2 px-2 py-1 bg-red-600/90 text-white text-xs rounded-full">3:38</span>
                                </div>
                                <div class="p-4">
                                    <span class="inline-block px-2 py-1 text-xs bg-red-100 text-red-600 rounded-full">YouTube</span>
                                    <h3 class="mt-2 font-semibold">Cornelia Sorabji: India's first female lawyer | Feminism In India</h3>
                                    <p class="text-sm text-gray-600 mt-1">By Feminism In India</p>
                                </div>
                            </div>

                            <!-- Video Card 5 - Instagram -->
                            <div class="bg-white rounded-xl shadow-sm overflow-hidden group cursor-pointer" data-video-type="youtube" data-video-id="1xHlrHr-IjY">
                                <div class="aspect-video bg-cover bg-center relative" style="background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTe25oEddQzOtOm9kXmUTLvKjvST4-WOAnrug&s');">
                                    <div class="absolute inset-0 bg-black/40 opacity-100 group-hover:opacity-75 transition-opacity flex items-center justify-center">
                                        <button onclick="playVideo('youtube', '1xHlrHr-IjY')" class="p-4 bg-gradient-to-tr from-purple-600 to-pink-500 rounded-full text-white shadow-lg transform scale-90 group-hover:scale-100 transition-transform">
                                            <i data-feather="play" class="w-6 h-6"></i>
                                        </button>
                                    </div>
                                    <span class="absolute top-2 right-2 px-2 py-1 bg-black/90 text-white text-xs rounded-full">2:21</span>
                                </div>
                                <div class="p-4">
                                    <span class="inline-block px-2 py-1 text-xs bg-gradient-to-r from-purple-100 to-pink-100 text-pink-600 rounded-full">youtube</span>
                                    <h3 class="mt-2 font-semibold">Inspiring Journey Of A Transgender Model | Khushi Shaikh | Motivational Story For Girls</h3>
                                    <p class="text-sm text-gray-600 mt-1">By Sh Success Step</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Success Story Modal -->
                <div id="storyModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-hidden="true">
                    <button class="btn-close">&times;</button>
                    <div class="bg-white rounded-lg max-w-3xl w-full overflow-hidden p-6" role="document">
                        <!-- Gauri's Story (with background image) -->
                        <div id="gauri-sawant-story" class="hidden relative bg-cover bg-center" style="background-image: url('./assets/gauri-sawant.jpg');">
                            <!-- subtle dark overlay to keep text readable -->
                            <div class="absolute inset-0 bg-black/40"></div>
                            
                             
                            <!-- inner scrollable content card -->
                            <div class="relative z-10 max-h-[70vh] overflow-auto p-6" role="dialog" aria-modal="true" aria-labelledby="gauriModalTitle">
                                <div class="bg-white/95 p-6 rounded-lg">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
                                        <!-- Image column (fixed visual) -->
                                        <div class="md:col-span-1 flex items-start justify-center">
                                            <img id="gauriModalImg" src="" alt="Portrait of Gauri Sawant, transgender activist" loading="lazy" class="w-full h-auto max-h-[50vh] object-contain rounded-lg shadow-sm">
                                        </div>

                                        <!-- Content column (scrollable) -->
                                        <div class="md:col-span-1 overflow-auto max-h-[70vh]">
                                            <div class="border-b pb-4 mb-4">
                                                <h2 id="gauriModalTitle" class="text-2xl md:text-3xl font-bold text-primary">Gauri Sawant – Transgender Mother & Activist</h2>
                                                <p class="text-sm text-gray-500 mt-1">A Journey of Love, Courage & Change</p>
                                            </div>
                                            
                                            <div class="prose max-w-none text-gray-800">
                                                <h3 class="text-lg font-semibold text-gray-800">Background</h3>
                                                <p class="mb-4">Gauri Sawant, born as Ganesh Sawant in Pune, Maharashtra, faced immense struggles growing up due to her gender identity. Rejected by her family, she left home at a very young age and found shelter and support within the transgender community in Mumbai.</p>
                                                
                                                <h3 class="text-lg font-semibold text-gray-800">Journey</h3>
                                                <p class="mb-4">Determined to create change, she became a strong voice for transgender rights and founded the Sakhi Char Chowghi Trust — an NGO that provides counseling, legal aid, and health services for transgender people and sex workers.</p>
                                                
                                                <h3 class="text-lg font-semibold text-gray-800">Achievement</h3>
                                                <p class="mb-4">Gauri gained national attention when she adopted a young orphaned girl, Gayatri, becoming one of the first transgender women in India to become a mother. Her story was also featured in a moving Vicks #TouchOfCare campaign that touched millions of hearts across India.</p>
                                                
                                                <h3 class="text-lg font-semibold text-gray-800">Impact</h3>
                                                <p class="mb-4">She continues to advocate for LGBTQ+ inclusion, education for transgender children, and healthcare access. Gauri was also appointed as one of the petitioners in the Supreme Court case that led to the recognition of transgender people as a "third gender" in 2014.</p>
                                                
                                                <div class="mt-6 p-4 bg-primary/5 rounded-lg">
                                                    <h3 class="text-lg font-semibold text-primary">Lesson</h3>
                                                    <p class="mb-2">❤️ Love, care, and motherhood are beyond gender.</p>
                                                    <p>Her life shows that compassion and courage can redefine what it means to be a parent and a changemaker.</p>
                                                </div>
                                                 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>                                                         
                       <!-- Cornelia Sorabji's Story -->
                        <div id="cornelia-sorabji-story" class="hidden">
                             <button class="btn-close">&times;</button>
                            <div class="border-b pb-4 mb-4">
                                <h2 class="text-2xl md:text-3xl font-bold text-primary">Cornelia Sorabji – Breaking Legal Barriers</h2>
                                <p class="text-sm text-gray-500 mt-1">India's First Woman Lawyer (1866-1954)</p>
                            </div>
                            
                            <div class="prose max-w-none">
                                <h3 class="text-lg font-semibold text-gray-800">Early Life</h3>
                                <p class="mb-4">Born on November 15, 1866, in Nashik, Maharashtra, Cornelia Sorabji came from a Parsi family that valued education. Her parents, Ferdinand Sorabji, a scholar, and Florence Sorabji, were strong advocates for girls' education, laying the foundation for her groundbreaking journey.</p>
                                
                                <h3 class="text-lg font-semibold text-gray-800">Education</h3>
                                <p class="mb-4">Cornelia shattered glass ceilings from the start, becoming the first woman to graduate in Arts (B.A.) from Bombay University in 1888. Her pioneering spirit led her to Oxford University's Somerville College, where she made history as the first female student from India, specializing in civil law.</p>
                                
                                <h3 class="text-lg font-semibold text-gray-800">Legal Career</h3>
                                <p class="mb-4">Despite completing her law degree in England, Cornelia faced significant barriers in India where women were barred from legal practice until 1923. Undeterred, she focused on representing women who couldn't appear in court themselves, particularly widows and women under purdah. When finally allowed to practice in 1923, she became a tireless advocate for women's legal rights.</p>
                                
                                <h3 class="text-lg font-semibold text-gray-800">Impact & Legacy</h3>
                                <p class="mb-4">Throughout her career, Cornelia worked extensively as a legal adviser to women in princely states, helped draft legal documents for marginalized women, and championed inheritance and property rights for Indian women. She documented her experiences in books like "India Calling" and "Inside the Law," leaving a lasting legacy for future generations of female lawyers.</p>
                                
                                <div class="mt-6 p-4 bg-primary/5 rounded-lg">
                                    <h3 class="text-lg font-semibold text-primary">Legacy</h3>
                                    <p class="mb-2">📚 "When one door is shut, a thousand others open." - Cornelia Sorabji</p>
                                    <p>Her pioneering work not only opened the legal profession to women in India but also established a foundation for women's legal rights and representation.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Karnam Malleswari's Story -->
                        <div id="karnam-malleswari-story" class="hidden">
                            <button class="btn-close">&times;</button>
                            <div class="border-b pb-4 mb-4">
                                <h2 class="text-2xl md:text-3xl font-bold text-primary">Karnam Malleswari – Breaking Olympic Barriers</h2>
                                <p class="text-sm text-gray-500 mt-1">India's First Female Olympic Medalist (Born: June 1, 1975)</p>
                            </div>
                            
                            <div class="prose max-w-none">
                                <h3 class="text-lg font-semibold text-gray-800">Early Life</h3>
                                <p class="mb-4">Born in Voosavanipeta, Srikakulam District, Andhra Pradesh, Karnam Malleswari emerged from a small village to become one of India's most celebrated athletes. Her journey in weightlifting began at a young age, defying societal norms and expectations.</p>
                                
                                <h3 class="text-lg font-semibold text-gray-800">Olympic Glory</h3>
                                <p class="mb-4">At the 2000 Sydney Olympics, Malleswari created history by becoming the first Indian woman to win an Olympic medal. Competing in the 69 kg weight category, she secured the bronze medal, a watershed moment that inspired generations of Indian women to pursue sports professionally.</p>
                                
                                <h3 class="text-lg font-semibold text-gray-800">Championship Journey</h3>
                                <p class="mb-4">Her path to Olympic glory was paved with numerous achievements: Gold at the 1994 World Weightlifting Championships in Turkey, Gold medals at the 1994 and 1998 Commonwealth Games, and medals at multiple Asian Games. She consistently proved herself as one of the world's top weightlifters.</p>
                                
                                <h3 class="text-lg font-semibold text-gray-800">Recognition & Impact</h3>
                                <p class="mb-4">Her extraordinary achievements earned her India's highest sporting and civilian honors: the Rajiv Gandhi Khel Ratna Award (1999-2000), Padma Shri (1999), and Arjuna Award (1994). Beyond accolades, she became a symbol of women's empowerment in sports.</p>
                                
                                <div class="mt-6 p-4 bg-primary/5 rounded-lg">
                                    <h3 class="text-lg font-semibold text-primary">Legacy</h3>
                                    <p class="mb-2">💪 "Nothing is impossible if you are determined."</p>
                                    <p>As a mentor and coach, Malleswari continues to inspire and guide the next generation of athletes, proving that gender is no barrier to sporting excellence.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Laxmi Narayan Tripathi's Story -->
                        <div id="laxmi-tripathi-story" class="hidden">
                            <button class="btn-close">&times;</button>
                            <div class="border-b pb-4 mb-4">
                                <h2 class="text-2xl md:text-3xl font-bold text-primary">Laxmi Narayan Tripathi – Breaking Gender Barriers</h2>
                                <p class="text-sm text-gray-500 mt-1">Pioneering Transgender Rights Activist (Born: November 10, 1978)</p>
                            </div>
                        
                            <div class="prose max-w-none">
                                <h3 class="text-lg font-semibold text-gray-800">Early Life</h3>
                                <p class="mb-4">Born in Mumbai into a middle-class Maharashtrian family, Laxmi identified as female from an early age. Despite facing social stigma, she pursued her education and developed her talents in classical dance, particularly in Bharatanatyam and Lavani forms.</p>
                            
                                <h3 class="text-lg font-semibold text-gray-800">Journey of Activism</h3>
                                <p class="mb-4">Joining the hijra community during adolescence, Laxmi transformed her personal experiences into a powerful platform for advocacy. She became one of India's most prominent transgender rights activists, focusing on education, employment, legal recognition, and healthcare access for the transgender community.</p>
                            
                                <h3 class="text-lg font-semibold text-gray-800">International Recognition</h3>
                                <p class="mb-4">Making history as the first transgender woman to represent India at the United Nations, Laxmi spoke passionately about human rights and LGBTQ+ issues. Her advocacy was instrumental in the passage of the Transgender Persons (Protection of Rights) Act, 2019, a landmark legislation in India.</p>
                            
                                <h3 class="text-lg font-semibold text-gray-800">Cultural Impact</h3>
                                <p class="mb-4">As an accomplished classical dancer, Laxmi uses performance art to raise awareness about gender diversity and social inclusion. Her story has been featured in numerous media outlets and documentaries, helping to change public perceptions about the transgender community.</p>
                            
                                <div class="mt-6 p-4 bg-primary/5 rounded-lg">
                                    <h3 class="text-lg font-semibold text-primary">Legacy</h3>
                                    <p class="mb-2">🌈 "Our existence is our resistance."</p>
                                    <p>Laxmi continues to inspire transgender youth in India, proving that one's identity should never be a barrier to success and social recognition. Her work has paved the way for greater acceptance and rights for the transgender community.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Video Modal -->
                <div id="videoModal" class="fixed inset-0 bg-black/90 hidden items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-hidden="true">
                    <div class="max-w-4xl w-full relative">
                        <div id="videoContainer" class="aspect-video bg-black rounded-lg overflow-hidden">
                            <!-- Video player will be injected here -->
                        </div>
                        <button id="closeVideo" class="absolute -top-12 right-0 text-white hover:text-gray-300 flex items-center gap-2">
                            <span>Close</span>
                            <i data-feather="x" class="w-6 h-6"></i>
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Floating Action Buttons -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col gap-4">
        <!-- SOS Button -->
        <a href="sos.html" class="w-14 h-14 bg-danger rounded-full shadow-soft flex items-center justify-center text-white hover:bg-danger/90 transition-all transform hover:scale-105 group relative">
            <i data-feather="alert-circle" class="w-6 h-6"></i>
            <span class="absolute right-16 bg-dark/90 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-0 translate-x-2 shadow-sm">
                SOS Emergency
            </span>
            <!-- Pulsing effect -->
            <span class="absolute inset-0 rounded-full border-4 border-danger/30 animate-ping"></span>
        </a>
        
        <!-- Chatbot Button -->
        <a href="chat.html" class="w-14 h-14 bg-primary rounded-full shadow-soft flex items-center justify-center text-white hover:bg-primary/90 transition-all transform hover:scale-105 group relative">
            <i data-feather="message-circle" class="w-6 h-6"></i>
            <span class="absolute right-16 bg-dark/90 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-0 translate-x-2 shadow-sm">
                Chat Support
            </span>
        </a>
    </div>

    <script>
        feather.replace();

        // Simple close functionality for story modals
        function closeStory() {
            // Hide the story modal
            const modal = document.getElementById('storyModal');
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                modal.setAttribute('aria-hidden', 'true');
            }
            
            // Show the hero slider
            const slider = document.getElementById('heroSlider');
            if (slider) {
                slider.classList.remove('hidden');
            }
        }

        // Update the showStory function to work with close buttons
        window.showStory = function(id) {
            // Hide all stories first
            document.querySelectorAll('[id$="-story"]').forEach(el => el.classList.add('hidden'));
            // Show requested story
            const story = document.getElementById(id + '-story');
            if(story) {
                story.classList.remove('hidden');
                const modal = document.getElementById('storyModal');
                if(modal) {
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                    modal.setAttribute('aria-hidden', 'false');
                }
                // Hide slider
                const slider = document.getElementById('heroSlider');
                if(slider) slider.classList.add('hidden');
            }
        };

        // Mobile menu toggle
        document.getElementById('mobile-menu').addEventListener('click', () => {
            document.querySelector('aside').classList.toggle('hidden');
        });

        // Add hover animations
        document.querySelectorAll('.hover\\:bg-gray-100').forEach(element => {
            element.addEventListener('mouseenter', () => {
                element.style.transition = 'all 0.3s ease';
            });
        });
        
        // Hero Success Stories Slider (top hero)
        (function(){
            const slider = document.getElementById('heroSlides');
            const slides = slider ? Array.from(slider.children) : [];
            const prevBtn = document.getElementById('heroPrev');
            const nextBtn = document.getElementById('heroNext');
            const dotsWrap = document.getElementById('heroDots');
            let current = 0;
            let interval;

            if(!slider || slides.length === 0) return;

            // make slider width = slides.length * 100%
            slider.style.width = (slides.length * 100) + '%';
            slides.forEach(slide => slide.style.width = (100 / slides.length) + '%');

            const goTo = (index) => {
                current = (index + slides.length) % slides.length;
                slider.style.transform = `translateX(-${current * (100 / slides.length)}%)`;
                updateDots();
            };

            const prev = () => goTo(current - 1);
            const next = () => goTo(current + 1);

            const updateDots = () => {
                if(!dotsWrap) return;
                dotsWrap.innerHTML = '';
                slides.forEach((_, i) => {
                    const btn = document.createElement('button');
                    btn.className = 'w-3 h-3 rounded-full bg-gray-300';
                    btn.setAttribute('aria-label', 'Slide '+(i+1));
                    btn.addEventListener('click', () => { goTo(i); resetInterval(); });
                    if(i === current) btn.classList.add('bg-primary');
                    dotsWrap.appendChild(btn);
                });
            };

            prevBtn?.addEventListener('click', () => { prev(); resetInterval(); });
            nextBtn?.addEventListener('click', () => { next(); resetInterval(); });

            const resetInterval = () => {
                clearInterval(interval);
                interval = setInterval(next, 5000);
            };

            // pause on hover
            const hero = document.getElementById('heroSlider');
            hero?.addEventListener('mouseenter', () => clearInterval(interval));
            hero?.addEventListener('mouseleave', () => resetInterval());

            updateDots();
            interval = setInterval(next, 5000);
        })();
        
        // Update total schemes count from schemes.json
        (function(){
            const el = document.getElementById('total-schemes');
            if(!el) return;
            fetch('schemes.json')
                .then(r => r.json())
                .then(data => {
                    // data might be { central: [...], state: [...] } or an array
                    let count = 0;
                    if(Array.isArray(data)) {
                        count = data.length;
                    } else if (data && typeof data === 'object') {
                        // sum lengths of arrays at first level
                        for(const key of Object.keys(data)) {
                            if(Array.isArray(data[key])) count += data[key].length;
                        }
                    }
                    el.textContent = count.toLocaleString();
                })
                .catch(err => {
                    console.warn('Could not load schemes.json', err);
                });
        })();

        // Video Modal Handler
        (function(){
            const modal = document.getElementById('videoModal');
            const container = document.getElementById('videoContainer');
            const closeBtn = document.getElementById('closeVideo');
            let activePlayer = null;
            let lastActive = null;

            window.playVideo = function(type, id) {
                lastActive = document.activeElement;
                
                // Clear previous content
                container.innerHTML = '';
                
                // Create appropriate player based on type
                switch(type) {
                    case 'youtube':
                        container.innerHTML = `
                            <iframe
                                width="100%"
                                height="100%"
                                src="https://www.youtube.com/embed/${id}?autoplay=1"
                                title="YouTube video player"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen>
                            </iframe>`;
                        break;
                    
                    case 'instagram':
                        // Instagram embed code would go here
                        // Using their oEmbed API in production
                        container.innerHTML = `
                            <iframe
                                width="100%"
                                height="100%"
                                src="https://www.instagram.com/p/${id}/embed"
                                frameborder="0"
                                allowfullscreen>
                            </iframe>`;
                        break;
                    
                    case 'local':
                        const video = document.createElement('video');
                        video.src = id;
                        video.controls = true;
                        video.autoplay = true;
                        video.style.width = '100%';
                        video.style.height = '100%';
                        container.appendChild(video);
                        activePlayer = video;
                        break;
                }

                // Show modal
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                modal.setAttribute('aria-hidden', 'false');
                closeBtn.focus();
            };

            const closeVideo = () => {
                // Stop video playback
                if(activePlayer && activePlayer.pause) {
                    activePlayer.pause();
                    activePlayer.currentTime = 0;
                }
                // Clear container
                container.innerHTML = '';
                activePlayer = null;
                
                // Hide modal
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                modal.setAttribute('aria-hidden', 'true');
                
                // Restore focus
                if(lastActive) lastActive.focus();
            };

            closeBtn?.addEventListener('click', closeVideo);
            modal?.addEventListener('click', (e) => { if(e.target === modal) closeVideo(); });
            document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeVideo(); });
        })();

        // Load Gauri Sawant image with fallback for both hero slide and modal
        (function() {
            const gauriSlide = document.getElementById('gauriSlide');
            const gauriModal = document.getElementById('gauri-sawant-story');

            const fallbackImage = 'https://source.unsplash.com/1200x800/?transgender,activist';

            const applyImage = (el, url) => {
                if(!el) return;
                el.style.backgroundImage = `url('${url}')`;
            };

            // candidate local paths (dash.html is in the hack/ folder)
            const candidates = [
                './assets/gauri-sawant.jpg',
                './gauri-sawant.jpg',
                './Gauri Sawant.jpg',
                './images/gauri-sawant.jpg'
            ];

            const tryPaths = (paths, onSuccess, onFail) => {
                let i = 0;
                const next = () => {
                    if(i >= paths.length) return onFail();
                    const p = paths[i++];
                    const img = new Image();
                    img.onload = () => onSuccess(p);
                    img.onerror = next;
                    img.src = p;
                };
                next();
            };

            tryPaths(candidates, (goodPath) => {
                applyImage(gauriSlide, goodPath);
                applyImage(gauriModal, goodPath);
                const imgEl = document.getElementById('gauriModalImg');
                if(imgEl) imgEl.src = goodPath;
            }, () => {
                console.warn('No local Gauri image found, using fallback');
                applyImage(gauriSlide, fallbackImage);
                applyImage(gauriModal, fallbackImage);
                const imgEl = document.getElementById('gauriModalImg');
                if(imgEl) imgEl.src = fallbackImage;
            });
        })();

        // i18n: load translations and apply
        (function(){
            const defaultLang = 'en';
            const select = document.getElementById('langSelect');
            const storageKey = 'jk_lang';

            const applyTranslations = (dict) => {
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(key && dict[key]) el.textContent = dict[key];
                });
                document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                    const key = el.getAttribute('data-i18n-placeholder');
                    if(key && dict[key]) el.setAttribute('placeholder', dict[key]);
                });
            };

            const loadLang = (lang) => {
                fetch(`i18n/${lang}.json`)
                    .then(r => r.json())
                    .then(dict => applyTranslations(dict))
                    .catch(err => {
                        if(lang !== defaultLang) loadLang(defaultLang);
                        console.warn('i18n load failed', err);
                    });
            };

            const current = localStorage.getItem(storageKey) || defaultLang;
            if(select) select.value = current;
            loadLang(current);

            select?.addEventListener('change', () => {
                const v = select.value;
                localStorage.setItem(storageKey, v);
                loadLang(v);
            });
        })();

        // Initialize close buttons when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Add click events to all close buttons
            const closeButtons = document.querySelectorAll('.btn-close');
            closeButtons.forEach(button => {
                button.addEventListener('click', closeStory);
            });
            
            // Close when clicking outside modal content
            const modal = document.getElementById('storyModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeStory();
                    }
                });
            }
            
            // Close with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeStory();
                }
            });
        });

        // Make function available globally
        window.closeStory = closeStory;

        // Speech Recognition
        (function() {
            const micButton = document.getElementById('micButton');
            const searchInput = document.getElementById('searchInput');
            const micStatus = document.getElementById('micStatus');
            
            // Check if browser supports speech recognition
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) {
                micButton?.classList.add('hidden');
                console.warn('Speech recognition not supported');
                return;
            }

            const recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US'; // Will update this based on selected language

            let isListening = false;

            function updateMicStatus(text, isError = false) {
                if (!micStatus) return;
                micStatus.textContent = text;
                micStatus.style.opacity = '1';
                micStatus.className = `absolute right-0 top-8 text-xs px-2 py-1 rounded whitespace-nowrap ${
                    isError ? 'bg-red-600' : 'bg-gray-800'
                } text-white`;
                setTimeout(() => {
                    micStatus.style.opacity = '0';
                }, 2000);
            }

            function startListening() {
                try {
                    recognition.start();
                    isListening = true;
                    micButton.classList.add('text-primary');
                    updateMicStatus('Listening...');
                } catch (err) {
                    console.error('Speech recognition error:', err);
                    updateMicStatus('Error starting', true);
                }
            }

            function stopListening() {
                try {
                    recognition.stop();
                    isListening = false;
                    micButton.classList.remove('text-primary');
                } catch (err) {
                    console.error('Error stopping speech recognition:', err);
                }
            }

            // Event listeners for speech recognition
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                searchInput.value = transcript;
                searchInput.dispatchEvent(new Event('input')); // Trigger search
                updateMicStatus('Got it!');
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                updateMicStatus('Error: ' + event.error, true);
                stopListening();
            };

            recognition.onend = () => {
                stopListening();
            };

            // Handle mic button clicks
            micButton?.addEventListener('click', (e) => {
                e.preventDefault();
                if (isListening) {
                    stopListening();
                } else {
                    startListening();
                }
            });

            // Update recognition language when language is changed
            const langSelect = document.getElementById('langSelect');
            langSelect?.addEventListener('change', () => {
                const lang = langSelect.value;
                // Map language codes to speech recognition codes
                const langMap = {
                    'en': 'en-US',
                    'hi': 'hi-IN',
                    'bn': 'bn-IN',
                    'te': 'te-IN',
                    'mr': 'mr-IN',
                    'ta': 'ta-IN',
                    'ur': 'ur-IN',
                    'gu': 'gu-IN',
                    'kn': 'kn-IN',
                    'ml': 'ml-IN',
                    'or': 'or-IN',
                    'pa': 'pa-IN',
                    'as': 'as-IN'
                };
                recognition.lang = langMap[lang] || 'en-US';
            });
        })();

        // Search Functionality
        (function() {
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');
            let schemes = null;
            let searchTimeout = null;

            // Load schemes data
            fetch('schemes.json')
                .then(r => r.json())
                .then(data => {
                    schemes = data;
                })
                .catch(err => {
                    console.warn('Could not load schemes data', err);
                });

            // Helper function to highlight search terms
            function highlightText(text, term) {
                if (!term) return text;
                const regex = new RegExp(`(${term})`, 'gi');
                return text.replace(regex, '<mark class="bg-yellow-200">$1</mark>');
            }

            // Function to create a search result item
            function createSearchResultItem(item, searchTerm) {
                const div = document.createElement('div');
                div.className = 'p-4 hover:bg-gray-50 cursor-pointer border-b last:border-b-0';
                
                const name = highlightText(item.name, searchTerm);
                const description = item.description ? highlightText(item.description, searchTerm) : '';
                
                div.innerHTML = `
                    <div class="flex items-start">
                        <span class="text-2xl mr-3">${item.categoryIcon || '📋'}</span>
                        <div>
                            <h3 class="font-medium text-gray-900">${name}</h3>
                            <p class="text-sm text-gray-600 mt-1">${description}</p>
                            <div class="flex items-center gap-2 mt-2">
                                <span class="px-2 py-1 bg-primary/10 text-primary rounded text-xs">${item.category}</span>
                                <span class="text-xs text-gray-500">${item.department}</span>
                            </div>
                        </div>
                    </div>
                `;

                div.addEventListener('click', () => {
                    if (item.officialWebsite) {
                        window.open(item.officialWebsite, '_blank');
                    } else {
                        // Navigate to schemes page with the scheme highlighted
                        window.location.href = 'schemes.html?scheme=' + encodeURIComponent(item.name);
                    }
                });

                return div;
            }

            // Search function
            function performSearch(term) {
                if (!schemes || !term) {
                    searchResults.classList.add('hidden');
                    return;
                }

                const results = [];
                const searchTerm = term.toLowerCase();

                // Search in central schemes
                if (schemes.central) {
                    schemes.central.forEach(scheme => {
                        if (
                            scheme.name.toLowerCase().includes(searchTerm) ||
                            scheme.description?.toLowerCase().includes(searchTerm) ||
                            scheme.category.toLowerCase().includes(searchTerm) ||
                            scheme.department.toLowerCase().includes(searchTerm)
                        ) {
                            results.push(scheme);
                        }
                    });
                }

                // Search in state schemes if they exist
                if (schemes.state) {
                    schemes.state.forEach(scheme => {
                        if (
                            scheme.name.toLowerCase().includes(searchTerm) ||
                            scheme.description?.toLowerCase().includes(searchTerm) ||
                            scheme.category.toLowerCase().includes(searchTerm) ||
                            scheme.department.toLowerCase().includes(searchTerm)
                        ) {
                            results.push(scheme);
                        }
                    });
                }

                // Update results UI
                searchResults.innerHTML = '';
                
                if (results.length === 0) {
                    searchResults.innerHTML = `
                        <div class="p-4 text-center text-gray-500">
                            No results found for "${term}"
                        </div>
                    `;
                } else {
                    results.slice(0, 5).forEach(result => {
                        searchResults.appendChild(createSearchResultItem(result, term));
                    });

                    if (results.length > 5) {
                        const viewAll = document.createElement('div');
                        viewAll.className = 'p-4 text-center text-primary hover:bg-gray-50 cursor-pointer';
                        viewAll.textContent = `View all ${results.length} results`;
                        viewAll.addEventListener('click', () => {
                            window.location.href = `schemes.html?search=${encodeURIComponent(term)}`;
                        });
                        searchResults.appendChild(viewAll);
                    }
                }

                searchResults.classList.remove('hidden');
            }

            // Event listeners
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    const term = e.target.value.trim();
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => performSearch(term), 300);
                });

                searchInput.addEventListener('focus', () => {
                    if (searchInput.value.trim()) {
                        searchResults.classList.remove('hidden');
                    }
                });

                // Close search results when clicking outside
                document.addEventListener('click', (e) => {
                    if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                        searchResults.classList.add('hidden');
                    }
                });

                // Handle keyboard navigation
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        searchResults.classList.add('hidden');
                    }
                });
            }
        })();
        
    </script>
</body>
</html>