<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Face Authentication</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-landmarks-detection@0.0.1/dist/face-landmarks-detection.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Login Form -->
        <div class="form-container" id="loginContainer">
            <h2>Login</h2>
            <form id="loginForm">
                <div class="input-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="input-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn">Login</button>
                <button type="button" class="btn-face" id="loginWithFace">Login with Face</button>
            </form>
            <p>Don't have an account? <a href="#" id="showSignup">Sign up</a></p>
        </div>

        <!-- Signup Form -->
        <div class="form-container hidden" id="signupContainer">
            <h2>Sign Up</h2>
            <form id="signupForm">
                <div class="input-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="input-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="input-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" required minlength="6">
                </div>
                <button type="submit" class="btn">Sign Up</button>
                <button type="button" class="btn-face" id="registerFace">Register Face</button>
            </form>
            <p>Already have an account? <a href="#" id="showLogin">Login</a></p>
        </div>

        <!-- Dashboard (After Login) -->
        <div class="form-container hidden" id="dashboard">
            <h2>Welcome to Dashboard!</h2>
            <div class="user-info">
                <p id="userEmail"></p>
                <p id="userName"></p>
            </div>
            <button id="logoutBtn" class="btn btn-secondary">Logout</button>
        </div>

        <!-- Face Registration Modal -->
        <div class="modal hidden" id="faceModal">
            <div class="modal-content">
                <h3>Face Registration</h3>
                <video id="video" width="400" height="300" autoplay muted></video>
                <canvas id="canvas" class="hidden"></canvas>
                <div class="modal-actions">
                    <button id="captureFace" class="btn">Capture Face</button>
                    <button id="cancelFace" class="btn btn-secondary">Cancel</button>
                </div>
                <div id="faceStatus"></div>
            </div>
        </div>

        <!-- Face Login Modal -->
        <div class="modal hidden" id="faceLoginModal">
            <div class="modal-content">
                <h3>Face Login</h3>
                <video id="loginVideo" width="400" height="300" autoplay muted></video>
                <div class="modal-actions">
                    <button id="startFaceLogin" class="btn">Start Face Recognition</button>
                    <button id="cancelFaceLogin" class="btn btn-secondary">Cancel</button>
                </div>
                <div id="faceLoginStatus"></div>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading hidden" id="loading">
            <div class="spinner"></div>
            <p>Processing...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>